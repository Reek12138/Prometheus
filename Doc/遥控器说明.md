## 遥控器说明

在真实飞行过程中，我们使用真实的遥控器作为控制无人机的主要操作来源，遥控器始终拥有最高的权限，精湛的遥控器操作手法可以保证无人机安稳着陆，但对于很多非专业来说，遥控的操作技巧是需要不断的练习的。我们始终强调一个观念，仿真与实机结合，这样更加符合开发流程，在以往的仿真中，我们通过键盘控制无人机飞行，并不能真实的反应出实机飞行时该怎么操作，也是基于现在存在的种种问题，为了让仿真与实机结合的更加完美，在Prometheus中增加遥控器控制方式，与真机使用更加对应起来，更加容易上手进行二次开发。下图就是仿真中的摇杆控制的框架协作图

### 遥控器仿真驱动安装

```shell
## 安装遥控器仿真驱动
sudo apt-get install jstest-gtk
## 安装完成之后，可以在终端中运行如下指令确认遥控器是否正常以及摇杆和按钮的响应情况
jstest-gtk
```

### 遥控器数据流

#### 真实飞行下的遥控器数据流（without Prometheus）

遥控器 -> 接收机  -> PX4固件（哪个模块，发布了哪个uorb消息）

#### 真实飞行下的遥控器数据流（with Prometheus）

遥控器 -> 接收机  -> PX4固件（哪个模块，发布了哪个uorb消息）-> PX4 Mavlink模块 -> Mavros（哪个文件，发布了哪个话题）  -> Prometheus订阅/mavros/rc/in话题

#### 仿真飞行下的遥控器数据流（with Prometheus）

遥控器 -> 遥控器驱动（joy_node.cpp）-> 遥控器信号转换（joy_translator.py）-> Mavros（哪个文件，发布了哪个话题）  -> Prometheus订阅/mavros/rc/in话题

